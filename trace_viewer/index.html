<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Software CPU Trace Viewer</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="container">
    <div id="trace-selection">
      <div class="hero-section">
        <h1>ğŸ”§ Software CPU Trace Viewer</h1>
        <p class="hero-description">
          Interactive visualization tool for exploring CPU execution traces.
          Step through each cycle, inspect registers, and watch your programs execute in real-time.
        </p>
      </div>
      <div class="trace-selection-section">
        <h2>ğŸ“‚ Available Execution Traces</h2>
        <p class="section-description">Select a trace to begin visualization</p>
        <div id="trace-list" class="trace-grid">
          <p>Loading available traces...</p>
        </div>
      </div>
    </div>
    <div id="viewer-container" class="hidden">
      <div class="header-controls">
        <button id="back-btn" class="secondary-btn">â† Back to Traces</button>
        <h2 id="current-trace-name"></h2>
        <div class="stats">
          <span id="total-cycles">Total Cycles: 0</span>
          <span id="progress-percent">Progress: 0%</span>
        </div>
      </div>
      <!-- Dashboard now includes controls as a panel -->
      <div class="dashboard">
        <!-- Row 1: 5 panels side by side -->
        <div class="panel registers-panel">
          <h3>ğŸ“Š Registers & Flags</h3>
          <div id="registers"></div>
        </div>
        <div class="panel instruction-panel">
          <h3>âš™ï¸ Current Instruction</h3>
          <div id="instr"></div>
        </div>
        <div class="panel stack-panel">
          <h3>ğŸ“š Stack Memory (Recursion Depth)</h3>
          <div id="stack-view"></div>
        </div>
        <div class="panel memory-panel-row1">
          <h3>ğŸ’¾ Memory Operations</h3>
          <div id="mem"></div>
        </div>
        <div class="panel button-panel">
          <h3>âš™ï¸ Controls</h3>
          <div class="control-panel">
            <div class="playback-controls-improved">
              <div class="control-row">
                <button id="first-btn" class="control-btn" title="First Cycle">â®ï¸</button>
                <button id="prev-btn" class="control-btn" title="Previous Cycle">âª</button>
                <button id="next-btn" class="control-btn" title="Next Cycle">â©</button>
                <button id="last-btn" class="control-btn" title="Last Cycle">â­ï¸</button>
              </div>
              <div class="control-row">
                <button id="play-pause-btn" class="control-btn primary" title="Play/Pause">â–¶ï¸ Run</button>
              </div>
              <div class="control-row">
                <button id="reset-btn" class="control-btn danger" title="Reset to Start">ğŸ”„ Reset</button>
              </div>
            </div>
            <div class="speed-control">
              <label for="speed-select">Speed:</label>
              <select id="speed-select">
                <option value="2000">0.5x (Slow)</option>
                <option value="1000" selected>1x (Normal)</option>
                <option value="500">2x (Fast)</option>
                <option value="250">4x (Very Fast)</option>
                <option value="100">10x (Ultra Fast)</option>
                <option value="0">Max Speed</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Compact slider section - full width -->
        <div class="slider-section-compact">
          <div class="slider-container">
            <input id="slider" type="range" min="0" max="0" value="0" />
          </div>
          <div class="cycle-display">
            <span id="cycle">Cycle: 0 / 0</span>
          </div>
        </div>

        <!-- Row 2-3: Program Code (left) and Memory Layout (right) -->
        <div class="panel code-panel-large">
          <h3>ğŸ“ Program Code</h3>
          <div id="code-view"></div>
        </div>
        <div class="panel memory-layout-panel-side">
          <h3>ğŸ—ºï¸ Memory Layout</h3>
          <div id="memory-layout"></div>
        </div>
      </div>
    </div>
  </div>
  <script src="viewer.js"></script>
</body>

</html>